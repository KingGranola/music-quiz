<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音楽知識診断</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Chart.js の読み込み -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- エラーハンドリング用 -->
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            console.error("Unhandled Error:", message);
            console.error("URL:", source);
            console.error("Line:", lineno);
            console.error("Column:", colno);
            console.error("Error object:", error);
            // ここでユーザーにエラーメッセージを表示する処理を追加することも可能
            const body = document.querySelector('body');
            if (body) {
                const errorDiv = document.createElement('div');
                errorDiv.style.color = 'red';
                errorDiv.style.backgroundColor = 'lightyellow';
                errorDiv.style.border = '1px solid red';
                errorDiv.style.padding = '10px';
                errorDiv.style.margin = '10px';
                errorDiv.textContent = `エラーが発生しました。画面を再読み込みするか、開発者にご連絡ください。(詳細: ${message})`;
                // body.insertBefore(errorDiv, body.firstChild); // 画面上部に表示
            }
            return true; // デフォルトのエラー処理を抑制
        };
    </script>
</head>
<body>

    <h1>音楽知識診断</h1>

    <!-- ジャンル選択画面 -->
    <div id="genre-selection">
        <h2>診断したいジャンルを選んでください</h2>
        <div class="explanation">
            <!-- 説明文は uiController.js で動的に設定されます -->
        </div>
        <div id="genre-options">
            <!-- ジャンル選択肢は uiController.js で動的に生成されます -->
        </div>
        <p id="genre-message" class="hidden"></p> <!-- ジャンル選択時のメッセージ -->
        <button id="start-button" class="hidden" disabled>診断スタート！</button>
    </div>

    <!-- クイズ画面 -->
    <div id="container" class="hidden">
        <!-- <h1>クイズ</h1> クイズ画面では不要かも -->
        <div id="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <p id="progress-text"></p>
        <p id="genre"></p>
        <p id="question"></p>
        <div id="buttons">
            <!-- 回答ボタンは uiController.js で動的に生成されます -->
        </div>
        <!-- ↓↓↓ フィードバックメッセージ表示用の要素 ↓↓↓ -->
        <p id="feedback-message" class="hidden"></p>
    </div>

    <!-- 結果表示画面 -->
    <div id="result" class="hidden">
        <h2>診断結果</h2>
        <canvas id="chart"></canvas> <!-- レーダーチャート表示エリア -->
        <!-- 結果のテキストやテーブルは uiController.js で動的に生成されます -->
    </div>

    <div id="version">v1.0.0</div> <!-- バージョン情報など -->

    <!-- JavaScript モジュールの読み込み -->
    <script type="module" src="js/main.js" defer></script>
    <!-- Live Reload スクリプト (開発用) -->
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
</body>
</html>
